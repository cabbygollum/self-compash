(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1317:function(e,s,t){"use strict";const{registerEpics:n,registerReducer:o}=t(4),m=t(2217),{componentAssessmentComponentCompleteEpic:p,componentAssessmentResetQuestionEpic:a,registerTrackingMapEpic:E,scormRestoreEpic:r}=t(2218);n(p,a,E,r),o("componentAssessment",m)},1591:function(e,s,t){"use strict";s.COMPONENT_ASSESSMENT_COMPLETED="COMPONENT_ASSESSMENT_COMPLETED",s.COMPONENT_ASSESSMENT_SCORM_RESTORE="COMPONENT_ASSESSMENT_SCORM_RESTORE",s.COMPONENT_ASSESSMENT_RESET="COMPONENT_ASSESSMENT_RESET",s.componentAssessmentCompleted=e=>({type:s.COMPONENT_ASSESSMENT_COMPLETED,payload:e}),s.componentAssessmentScormRestore=e=>({type:s.COMPONENT_ASSESSMENT_SCORM_RESTORE,payload:e}),s.componentAssessmentReset=e=>({type:s.COMPONENT_ASSESSMENT_RESET,payload:e})},2217:function(e,s,t){"use strict";const n=t(221),o=t(10),m=t(8),p=t(18),{SETUP_APP:a}=t(9),{RESTORE_EXTENSION:E}=t(95),{COMPONENT_ASSESSMENT_COMPLETED:r,COMPONENT_ASSESSMENT_RESET:_,COMPONENT_ASSESSMENT_SCORM_RESTORE:c}=t(1591),i={_isEnabled:!1,_isComplete:!1,_isPassed:!1,_assessmentScore:0,_assessmentComponentId:null,_assessmentAttemptsTaken:0};e.exports=(e=i,s)=>{switch(s.type){case a:return function(e,s){const{course:t,components:o}=s.payload;if(m(t,"_courseAssessment._isEnabled",!1))return e;const a=p(o,{_isAssessmentEnabled:!0});if(!a)return e;return n({},e,{_isEnabled:!0,_assessmentComponentId:a._id})}(e,s);case r:return n({},e,s.payload);case _:return n({},e,{_assessmentAttemptsTaken:e._assessmentAttemptsTaken+1});case c:return n({},e,s.payload);case E:if("componentAssessment"===s.payload.extensionName)return o({},e,s.payload.extensionData);default:return e}}},2218:function(e,s,t){"use strict";const n=t(8),o=t(221),{Observable:m}=t(5),{SETUP_APP:p,APP_READY:a}=t(9),{COMPONENT_COMPLETED:E,RESET_QUESTION:r,updateComponents:_}=t(63),{registerTrackingMap:c}=t(4),{componentAssessmentCompleted:i,componentAssessmentReset:S,componentAssessmentScormRestore:l}=t(1591),d=t(2219);s.componentAssessmentComponentCompleteEpic=(e,s)=>e.filter(e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===E&&e.payload.componentId===t._assessmentComponentId}).map(e=>{const{components:t,componentAssessment:o}=s.getState(),m=t[e.payload.componentId];let p=m._isPassed;if(!m._isPassed)if(m._allowAssessmentRetake){const e=n(m,"_assessmentRetakeAttempts",1);p=!n(m,"_allowUnlimitedRetakeAttempts",!1)&&o._assessmentAttemptsTaken===e}else p=!0;const a={_isComplete:p,_isPassed:m._isPassed,_assessmentScore:m._assessmentScore};return i(a)}),s.componentAssessmentResetQuestionEpic=(e,s)=>e.filter(e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===r&&e.payload.componentId===t._assessmentComponentId}).map(()=>S()),s.registerTrackingMapEpic=(e,s)=>e.filter(e=>{const{componentAssessment:t}=s.getState();return t._isEnabled&&e.type===p}).do(()=>{c("componentAssessment",d,"extensions")}).ignoreElements(),s.scormRestoreEpic=(e,s)=>e.filter(e=>{const{componentAssessment:t,scorm:n}=s.getState();return!!(n&&n._isEnabled&&t._isEnabled&&e.type===a)}).mergeMap(()=>{const{scorm:e,components:t}=s.getState(),n=[];if(e&&e.suspendData){const{_isAssessmentComplete:s,_isPassed:m,_score:p,_assessmentComponentId:a,_assessmentAttemptsTaken:E}=e.suspendData;if(s){n.push(l({_isComplete:s,_isPassed:m,_assessmentScore:p,_assessmentComponentId:a,_assessmentAttemptsTaken:E}));const e=t[a];if(e){const s=o({},e,{_isPassed:m,_assessmentScore:p});n.push(_({[a]:s}))}}}return n.length?m.of(...n):m.empty()})},2219:function(e,s,t){"use strict";e.exports={_isComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0},_isPassed:{fieldKey:"_isPassed",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_score:{fieldKey:"_assessmentScore",type:"Number",shouldRestore:!0},_isAssessmentComplete:{fieldKey:"_isComplete",type:"Boolean",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentComponentId:{fieldKey:"_assessmentComponentId",type:"String",shouldRestore:!0,shouldStoreOnTopLevel:!0},_assessmentAttemptsTaken:{fieldKey:"_assessmentAttemptsTaken",type:"Number",shouldRestore:!0,shouldStoreOnTopLevel:!0}}}}]);